# 複合制約

**ファセットパラメータ**を指定する際には、**単純値**または**複合制約**のいずれかを指定できます。**単純値**
はテキスト、数字、またはブール値（TRUE / FALSE）のいずれかです。対照的に、**複合制約**
は、有効な値のピックリスト、命名スキームと規約、数値範囲などを表すことができます。制約は4つの異なる方法で指定できます：

- 列挙
- パターン
- 範囲
- 長さ

## 列挙

**列挙**制約は、値が許可された値のリストのいずれかでなければならないことを意味します。たとえば、材料が「コンクリート」または「鋼」のいずれかであることを指定したい場合があります。

数字もリストとして指定できます。たとえば、「コンクリートの強度等級が "25"、"30"、"35"、または "40"
のいずれかである」と指定することができます。ユーザーが "30" の値を持っている場合、それはあなたの**列挙**
に準拠します。しかし、"31" を選択した場合は準拠しません。

ブール値も、「TRUE」または「FALSE」として指定できます。ただし、ブール値を列挙として指定することは一般に無意味です。なぜなら、ブール値の性質上、ユーザーは常に「TRUE」または「FALSE」のいずれかを選択する必要があるからです。

許可された値のリストを指定しても、ユーザーはそのリストから1つの値のみを選択できることに注意してください。

## パターン

**パターン**制約は、命名規則または命名スキームを表します。たとえば、ドアタイプが「DT01」、「DT02」、「DT03」などの規則を使用して命名されるべきであることを指定したい場合、「DT」の文字が最初に来て、その後に2桁の数字が続くというパターンを作成できます。

コンピュータには**正規表現**と呼ばれるテキストのパターンを定義する特別な方法があります。これは、特別な記号を使用して、コンピュータに数字、文字、または任意の文字を期待するように伝えます。あなたはすでに"`*`"
文字をワイルドカードとして使用するコンピュータのパターンに精通しているかもしれません。たとえば、"`DT*`"
のパターンは、"`DTA`"、"`DTB`"、または"`DT01`"などの値で満たすことができると言うかもしれません。**正規表現**
は少し複雑ですが、その代わりに、パターンのルールをより具体的にすることができます。AEC業界で命名規則が重要であることを考えると、
**正規表現**を学ぶことを強くお勧めします。

ここでは、使用できる一般的な例をいくつか紹介します：

| パターン         | 説明                                                                                                 | パターン基準を満たす例                                                                                             | パターンに合致しない例                                                                 |
|--------------|----------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| `DT01`       | 文字と数字のみが使用され、記号がない場合、パターンは正確な一致に相当します。                                                             | "`DT01`"                                                                                                | "`DT01`"以外のすべてが失敗します。                                                       |
| `DT_ABC-01`  | 文字と数字の他に、"`_`"と"`-`"記号には特別な意味がないため、このパターンも正確な一致に相当します。                                             | "`DT_ABC-01`"                                                                                           | "`DT_ABC-01`"以外のすべてが失敗します。                                                  |
| `DT.`        | "`.`" 記号は、_単一_ 文字に対するワイルドカードです。                                                                    | "`DT1`", "`DT2`", "`DTA`", "`DTX`", "`DT+`", etc                                                        | "`DT`"の後に複数の文字があるため、"`DT01`"は一致しません。"`ADT1`"は"`A`"ではなく"`DT`"で始まらないため一致しません。 |
| `DT..`       | "`.`" ワイルドカード記号が複数回使用される場合、それぞれの時間は_単一_ 文字を表します。                                                   | "`DT01`", "`DT02`", "`DTAB`", "`DTXY`", "`DT++`", etc                                                   | "`DT`"の後に2文字がないため、"`DT1`"は一致しません。                                           |
| `DT.*`       | "`*`" 記号が "`.`" 記号の後に使用されて "`.*`" を作成すると、単一の文字ではなく任意の文字数に対するワイルドカードになります。そのため、`DT`で始まるものは何でも一致します。 | "`DT1`", "`DT02`", "`DTA`", "`DTXYZ`", "`DT+1-BC=123`", etc                                             | "`DT`"で始まらないものは何でも失敗します。例えば、"`ADT`", "`ABC-DT01`", etc.                     |
| `.*DT.*`     | 今回は、"`.*`" 記号の組み合わせが "`DT`" のテキストの前後に使用され、テキスト "`DT`" の前後に任意の文字数（ゼロ文字を含む）が出現できることを意味します。           | "`DT`"は技術的に前後にゼロ文字があるため一致します（難しいですね？）。"`DT1`", "`ADT`", "`ADT1`", "`ABCDT01`", "`ABC-DT-01`" はすべて一致します。 | "`DT`"を含まないものは何でも失敗します。例えば、"`ADIT`", "`TD`", "`D-T`"。                       |
| `DT[0-9]`    | "`[0-9]`" 記号の組み合わせは、テキスト "`DT`" の後に0から9までの_単一_ の数字が許可されることを意味します。                                  | "`DT0`", "`DT1`", "`DT2`" から "`DT9`" まで全て一致します                                                          | "`DT`"の後に_単一_ の数字以外があるものは何でも失敗します。例えば、"`DT`", "`DTA`", "`DT123`"            |
| `DT[0-9]*`   | "`*`" 記号が "`[0-9]`" 記号の後に使用されて "`[0-9]*`" を作成すると、テキスト "`DT`" の後に任意の数字（ゼロを含む！）があることを意味します。          | "`DT`", "`DT1`", "`DT12`", "`DT012345`", etc はすべて一致します                                                  | "`DT`"の後に数字以外がある値はすべて失敗します。例えば、"`DTABC`", "`DT01A`", "DTA1B2", etc.         |
| `DT[0-9]{2}` | 今回は、"`*`" 記号の代わりに "`{2}`" 記号を追加し、"`DT`" のテキストの後に正確に2桁の数字が必要であることを意味します。                            | "`DT01`", "`DT24`", "`DT99`", etc はすべて一致します                                                             | 2桁以外のものはすべて失敗します。例えば、"`DTA`", "`DT0`", "`DT123`"。                           |

**正規表現**
は確立された方法論であり、非常に高度なパターンマッチングを実現できますが、その能力を完全に学ぶには時間がかかります。その結果、ここでは基本的な例のみが示されています。完全な機能を教えることは、IDSのドキュメントの範囲外です。それを完全に活用するためには、オンラインのチュートリアルやリソースが豊富にあります：

- [初心者向け正規表現チュートリアル](https://regexone.com/)
- [オンライン正規表現テストサイト](https://regex101.com/)
- [XML正規表現](https://www.regular-expressions.info/xml.html)

正規表現には複数の「フレーバー」または「方言」があるため、最初の2つのリンクは有用な学習リソースですが、IDSで利用できない正規表現の機能を含む場合があります。3つ目のリンク（XML正規表現）は、IDSで使用できるものについての権威ある情報源として参照できます。一般的に、IDSの正規表現はシンプルであり、高度な正規表現の機能は含まれていません。

## 範囲

**範囲**
制約を使用すると、値が数字であり、値の範囲内に収まる必要があることを指定できます。最小値、最大値、またはその両方を指定できます。最小値または最大値が包含的（例：`>=`
および `<=`）または排他的（例：`>` および `<`）かどうかも指定できます。たとえば、「3より大きく」かつ「10以下」である必要がある値を指定するかもしれません。

## 長さ

**長さ**制約は、値に許可される文字数を正確に指定します。たとえば、長さを3と指定した場合、「`ABC`」や「`123`
」のように3文字の長さの値が要件を満たします。他の値、例えば「`AB`」や「`ABC123`」は要件を満たしません。

同様に、**最大長**および/または**最小長**を指定できます。**最大長**が5の場合、「`ABCDE`」の値は許可されますが、「`ABCDEF`
」のような値は許可されません。**最小長**が3の場合、「`ABC`」の値は許可されますが、「`AB`」の値は許可されません。

「`.{3}`」などの**パターン**を指定することで同じ効果を達成できますが、**長さ**制約の方が単純で計算が速いです。
